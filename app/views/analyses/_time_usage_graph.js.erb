var chart;

AmCharts.ready(function () {

  chart = new AmCharts.AmSerialChart();
  chart.addTitle('Average daily site visits');
  chart.dataProvider = $('.graph_data_class').data('siteusage');
  chart.categoryField = "hour";
  chart.startDuration = 1;

  var categoryAxis = chart.categoryAxis;
  categoryAxis.labelRotation = 90;
  categoryAxis.gridPosition = "start";

  var graph = new AmCharts.AmGraph();
  graph.valueField = "visits";
  graph.balloonText = "[[category]]: <b>[[value]]</b>";
  graph.type = "column";
  graph.lineAlpha = 0;
  graph.fillAlphas = 0.8;
  chart.addGraph(graph);

  var chartCursor = new AmCharts.ChartCursor();
  chartCursor.cursorAlpha = 0;
  chartCursor.zoomable = false;
  chartCursor.categoryBalloonEnabled = false;
  chart.addChartCursor(chartCursor);

  chart.creditsPosition = "top-right";

  chart.write("siteusagechart");
});
